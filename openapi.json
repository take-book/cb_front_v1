{"openapi":"3.1.0","info":{"title":"Chat LLM Service API","version":"0.1.0"},"paths":{"/api/v1/auth/login":{"post":{"tags":["auth"],"summary":"Login","operationId":"login_api_v1_auth_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_api_v1_auth_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/refresh":{"post":{"tags":["auth"],"summary":"Refresh Token","description":"ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã™ã‚‹","operationId":"refresh_token_api_v1_auth_refresh_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/auth/me":{"get":{"tags":["auth"],"summary":"Get Current User Info","operationId":"get_current_user_info_api_v1_auth_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/chats/":{"post":{"tags":["chats"],"summary":"Create Chat","description":"æ–°ã—ã„ãƒãƒ£ãƒƒãƒˆã‚’é–‹å§‹ã—ã€ãƒãƒ£ãƒƒãƒˆUUIDã‚’è¿”ã™","operationId":"create_chat_api_v1_chats__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatCreateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatCreateResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["chats"],"summary":"Get Chats With Search And Pagination","description":"ãƒãƒ£ãƒƒãƒˆã®ä¸€è¦§ã‚’ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚½ãƒ¼ãƒˆãƒ»ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ä»˜ãã§å–å¾—ã™ã‚‹","operationId":"get_chats_with_search_and_pagination_api_v1_chats__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"default":"updated_at.desc","title":"Sort"}},{"name":"q","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Q"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/messages":{"post":{"tags":["chats"],"summary":"Send Message","description":"æ—¢å­˜ãƒãƒ£ãƒƒãƒˆã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã€ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®å¿œç­”ã‚’è¿”ã™","operationId":"send_message_api_v1_chats__chat_uuid__messages_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["chats"],"summary":"Get History","description":"æŒ‡å®šãƒãƒ£ãƒƒãƒˆã®å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å±¥æ­´ã‚’è¿”å´","operationId":"get_history_api_v1_chats__chat_uuid__messages_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/select":{"post":{"tags":["chats"],"summary":"Select Node","description":"ç‰¹å®šã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é¸æŠžã—ã€ä»¥é™ã®ä¼šè©±ã®è¦ªã«è¨­å®šã™ã‚‹","operationId":"select_node_api_v1_chats__chat_uuid__select_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SelectRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/path":{"get":{"tags":["chats"],"summary":"Get Path","description":"ç¾åœ¨ã®ãƒŽãƒ¼ãƒ‰ã¾ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸UUIDãƒ‘ã‚¹ã‚’å–å¾—ã™ã‚‹","operationId":"get_path_api_v1_chats__chat_uuid__path_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PathResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/last-position":{"get":{"tags":["chats"],"summary":"Get Last Position","description":"ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœ€å¾Œã®ä½ç½®ï¼ˆãƒŽãƒ¼ãƒ‰IDï¼‰ã‚’å–å¾—ã™ã‚‹","operationId":"get_last_position_api_v1_chats__chat_uuid__last_position_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/messages/{message_id}/retry":{"post":{"tags":["chats"],"summary":"Retry Message","description":"å¤±æ•—ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å†è©¦è¡Œã™ã‚‹","operationId":"retry_message_api_v1_chats__chat_uuid__messages__message_id__retry_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}},{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/recent":{"get":{"tags":["chats"],"summary":"Get Recent Chats","description":"æœ€è¿‘ã®ãƒãƒ£ãƒƒãƒˆä¸€è¦§ã‚’å–å¾—ã™ã‚‹ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰","operationId":"get_recent_chats_api_v1_chats_recent_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}":{"delete":{"tags":["chats"],"summary":"Delete Chat","description":"ãƒãƒ£ãƒƒãƒˆã‚’å‰Šé™¤ã™ã‚‹","operationId":"delete_chat_api_v1_chats__chat_uuid__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["chats"],"summary":"Get Chat Metadata","description":"ãƒãƒ£ãƒƒãƒˆã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹","operationId":"get_chat_metadata_api_v1_chats__chat_uuid__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatMetadataResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["chats"],"summary":"Update Chat","description":"ãƒãƒ£ãƒƒãƒˆã®ã‚¿ã‚¤ãƒˆãƒ«ã‚„ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹","operationId":"update_chat_api_v1_chats__chat_uuid__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateChatRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/current-node":{"get":{"tags":["chats"],"summary":"Get Current Node","description":"ç¾åœ¨ã®ãƒŽãƒ¼ãƒ‰IDã‚’å–å¾—ã™ã‚‹","operationId":"get_current_node_api_v1_chats__chat_uuid__current_node_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/search":{"get":{"tags":["chats"],"summary":"Search Messages","description":"ãƒãƒ£ãƒƒãƒˆå†…ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢ã™ã‚‹","operationId":"search_messages_api_v1_chats__chat_uuid__search_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}},{"name":"q","in":"query","required":true,"schema":{"type":"string","title":"Q"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/messages/{message_id}":{"patch":{"tags":["chats"],"summary":"Edit Message","description":"æ—¢å­˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ã‚’ä¿®æ­£ã™ã‚‹","operationId":"edit_message_api_v1_chats__chat_uuid__messages__message_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}},{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EditMessageRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["chats"],"summary":"Delete Message","description":"æŒ‡å®šã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã‹ã‚‰å‰Šé™¤ã™ã‚‹","operationId":"delete_message_api_v1_chats__chat_uuid__messages__message_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}},{"name":"message_id","in":"path","required":true,"schema":{"type":"string","title":"Message Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/chats/{chat_uuid}/tree":{"get":{"tags":["chats"],"summary":"Get Tree Structure","description":"ãƒãƒ£ãƒƒãƒˆã®ãƒ„ãƒªãƒ¼æ§‹é€ ã‚’å–å¾—ã™ã‚‹ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ç”¨ï¼‰","operationId":"get_tree_structure_api_v1_chats__chat_uuid__tree_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"chat_uuid","in":"path","required":true,"schema":{"type":"string","title":"Chat Uuid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TreeStructureResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/users":{"post":{"tags":["users"],"summary":"Register User","description":"æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²","operationId":"register_user_api_v1_users_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegisterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRegisterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/health":{"get":{"summary":"Health Check","description":"ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ","operationId":"health_check_api_v1_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_login_api_v1_auth_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_api_v1_auth_login_post"},"ChatCreateRequest":{"properties":{"initial_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Initial Message"}},"type":"object","title":"ChatCreateRequest"},"ChatCreateResponse":{"properties":{"chat_uuid":{"type":"string","title":"Chat Uuid"}},"type":"object","required":["chat_uuid"],"title":"ChatCreateResponse"},"ChatMetadataResponse":{"properties":{"chat_uuid":{"type":"string","title":"Chat Uuid"},"title":{"type":"string","title":"Title"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"message_count":{"type":"integer","title":"Message Count"},"owner_id":{"type":"string","title":"Owner Id"}},"type":"object","required":["chat_uuid","title","created_at","updated_at","message_count","owner_id"],"title":"ChatMetadataResponse"},"EditMessageRequest":{"properties":{"content":{"type":"string","title":"Content"}},"type":"object","required":["content"],"title":"EditMessageRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HistoryMessage":{"properties":{"message_uuid":{"type":"string","title":"Message Uuid"},"role":{"type":"string","title":"Role"},"content":{"type":"string","title":"Content"}},"type":"object","required":["message_uuid","role","content"],"title":"HistoryMessage"},"HistoryResponse":{"properties":{"messages":{"items":{"$ref":"#/components/schemas/HistoryMessage"},"type":"array","title":"Messages"}},"type":"object","required":["messages"],"title":"HistoryResponse"},"MessageRequest":{"properties":{"content":{"type":"string","title":"Content"},"parent_message_uuid":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Parent Message Uuid"}},"type":"object","required":["content"],"title":"MessageRequest"},"MessageResponse":{"properties":{"message_uuid":{"type":"string","title":"Message Uuid"},"content":{"type":"string","title":"Content"}},"type":"object","required":["message_uuid","content"],"title":"MessageResponse"},"PaginatedResponse":{"properties":{"items":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Items"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"limit":{"type":"integer","title":"Limit"},"pages":{"type":"integer","title":"Pages"}},"type":"object","required":["items","total","page","limit","pages"],"title":"PaginatedResponse"},"PathResponse":{"properties":{"path":{"items":{"type":"string"},"type":"array","title":"Path"}},"type":"object","required":["path"],"title":"PathResponse"},"SelectRequest":{"properties":{"message_uuid":{"type":"string","title":"Message Uuid"}},"type":"object","required":["message_uuid"],"title":"SelectRequest"},"TreeNode":{"properties":{"uuid":{"type":"string","title":"Uuid"},"role":{"type":"string","title":"Role"},"content":{"type":"string","title":"Content"},"children":{"items":{"$ref":"#/components/schemas/TreeNode"},"type":"array","title":"Children"}},"type":"object","required":["uuid","role","content","children"],"title":"TreeNode"},"TreeStructureResponse":{"properties":{"chat_uuid":{"type":"string","title":"Chat Uuid"},"tree":{"$ref":"#/components/schemas/TreeNode"},"current_node_uuid":{"type":"string","title":"Current Node Uuid"}},"type":"object","required":["chat_uuid","tree","current_node_uuid"],"title":"TreeStructureResponse"},"UpdateChatRequest":{"properties":{"title":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Title"},"system_prompt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"System Prompt"}},"type":"object","title":"UpdateChatRequest"},"UserRegisterRequest":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"UserRegisterRequest"},"UserRegisterResponse":{"properties":{"uuid":{"type":"string","title":"Uuid"},"username":{"type":"string","title":"Username"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["uuid","username","created_at"],"title":"UserRegisterResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/login"}}}}}}